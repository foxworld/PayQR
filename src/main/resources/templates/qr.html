<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>QR 출력</title>
    <script>
        const socket = new SockJS('/ws');
        const stompClient = Stomp.over(socket);

        stompClient.connect({}, () => {
        stompClient.subscribe('/topic/qr', (message) => {
            const qrData = JSON.parse(message.body);
            document.getElementById("qrImage").src = `/api/pay/qr/image?amount=${qrData.amount}&item=${qrData.item}&t=${Date.now()}`;
            });
        });
    </script>
</head>
<body>
<h2 th:text="'품명: ' + ${item}"></h2>
<h3 th:text="'금액: ' + ${amount} + '원'"></h3>
<img id="qrImage" th:src="'/api/pay/qr/image?amount=' + ${amount} + '&item=' + ${item}" alt="QR Code"/>
</body>
</html>
